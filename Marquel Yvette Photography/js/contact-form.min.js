!function(){"use strict";function e(){const e=document.getElementById("proposal-form"),o=document.getElementById("phone");document.getElementById("form-success"),document.getElementById("form-error");if(!e)return;o&&o.addEventListener("input",t),e.addEventListener("submit",n);e.querySelectorAll("[required]").forEach(e=>{e.addEventListener("blur",r)})}function t(e){let t=e.target.value.replace(/\D/g,"");0!==t.length?t.length<=3?e.target.value=`(${t}`:t.length<=6?e.target.value=`(${t.slice(0,3)}) ${t.slice(3)}`:e.target.value=`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`:e.target.value=""}function r(e){const t=e.target,r=t.type,n=t.value.trim();if(function(e){e.classList.remove("error");const t=e.parentElement.querySelector(".field-error");t&&t.remove()}(t),t.hasAttribute("required")&&""===n)return o(t,"This field is required"),!1;if("email"===r&&""!==n){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n))return o(t,"Please enter a valid email address"),!1}if("phone"===t.id&&""!==n){if(!/^\(\d{3}\)\s\d{3}-\d{4}$/.test(n))return o(t,"Please enter a valid phone number: (703) 555-1234"),!1}return"select-one"!==r||!t.hasAttribute("required")||""!==n||(o(t,"Please select an option"),!1)}function o(e,t){e.classList.add("error");let r=e.parentElement.querySelector(".field-error");r||(r=document.createElement("span"),r.className="field-error",r.style.color="#f44336",r.style.fontSize="0.85rem",r.style.marginTop="5px",r.style.display="block",e.parentElement.appendChild(r)),r.textContent=t}async function n(e){e.preventDefault();const t=e.target,o=t.closest(".form-wrapper"),n=document.getElementById("form-success"),l=document.getElementById("form-error");if(!function(e){let t=!0;return e.querySelectorAll("[required]").forEach(e=>{r({target:e})||(t=!1)}),t}(t)){const e=t.querySelector(".error");return void(e&&e.scrollIntoView({behavior:"smooth",block:"center"}))}o.classList.add("form-loading");const s=t.querySelector('button[type="submit"]'),i=s.textContent;s.textContent="SENDING",s.disabled=!0;try{const e=new FormData(t),r=t.getAttribute("action");if(!(await fetch(r,{method:"POST",body:e,headers:{Accept:"application/json"}})).ok)throw new Error("Form submission failed");t.style.display="none",n.style.display="block",n.scrollIntoView({behavior:"smooth",block:"center"}),window.gtag&&gtag("event","form_submission",{event_category:"Contact",event_label:"Proposal Request"}),setTimeout(()=>{t.reset()},5e3)}catch(e){console.error("Form submission error:",e),t.style.display="none",l.style.display="block",l.scrollIntoView({behavior:"smooth",block:"center"})}finally{o.classList.remove("form-loading"),s.textContent=i,s.disabled=!1}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}();